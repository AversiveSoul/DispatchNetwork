<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SDN // VILAIN_DATABASE</title>
    <script>
    (function() {
        const isAuthenticated = sessionStorage.getItem('sdn_auth');
        if (isAuthenticated !== 'true') {
            window.location.href = "index.html";
        }
    })();
</script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@400;700;900&display=swap" rel="stylesheet" />
    <style>
      :root {
        --bg-black: #050505;
        --card-bg: #0a0a0a;
        --accent-red: #b30000; /* Vermelho mais elegante e menos saturado */
        --border-color: #222;
      }
      body {
        font-family: "Inter", sans-serif;
        background-color: var(--bg-black);
        color: #d1d1d1;
        overflow-x: hidden;
      }
      /* Efeito de linhas de monitor (CRT) mais sutil */
      .crt-overlay::before {
        content: " ";
        display: block;
        position: fixed;
        top: 0; left: 0; bottom: 0; right: 0;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.15) 50%), 
                    linear-gradient(90deg, rgba(255, 0, 0, 0.02), rgba(0, 0, 0, 0), rgba(255, 0, 0, 0.02));
        z-index: 100;
        background-size: 100% 4px, 4px 100%;
        pointer-events: none;
      }
      .font-mono-tactical { font-family: "Share Tech Mono", monospace; }
      
      .database-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        transition: all 0.3s ease;
      }
      .database-card:hover {
        border-color: #444;
        background: #0f0f0f;
      }

      .status-bar-bg { height: 8px; background: #151515; border: 1px solid #222; border-radius: 2px; }
      .status-fill { height: 100%; transition: width 1s ease; border-radius: 1px; }

      .photo-frame {
        filter: grayscale(1) contrast(1.1);
        border: 1px solid #333;
        position: relative;
      }
      .photo-frame::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(transparent 50%, rgba(0,0,0,0.1) 50%);
        background-size: 100% 4px;
      }
    </style>
  </head>
  <body class="crt-overlay">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      function VilainCard({ v }) {
        const sdn = parseInt(v.fearSdn) || 0;
        const media = parseInt(v.fearMedia) || 0;
        const civis = parseInt(v.fearCivis) || 0;
        const total = sdn + media + civis;

        // Estilo baseado na periculosidade
        const isCritical = total > 150;
        const statusLabel = isCritical ? "AMEAÇA DE NÍVEL ALTO" : "AMEAÇA DE NÍVEL BAIXO/MÉDIO";
        const accent = isCritical ? "#ff3131" : "#888";

        return (
          <div className="database-card w-full max-w-4xl p-5 mb-6 flex flex-col md:flex-row gap-8 border-t-4" style={{ borderTopColor: isCritical ? '#8b0000' : '#333' }}>
            
            {/* Seção da Foto */}
            <div className="w-full md:w-40 flex-shrink-0">
              <div className="photo-frame aspect-[3/4] bg-black overflow-hidden shadow-lg">
                <img 
                  src={`./VilainsFotos/${v.portraitFilename}`} 
                  className="w-full h-full object-cover"
                  onError={(e) => { e.target.src="https://via.placeholder.com/300x400?text=NO_SIGNAL"; }}
                />
              </div>
              <div className="mt-3 py-1 bg-black border border-[#222] text-center">
                <span className="font-mono-tactical text-[10px] tracking-widest uppercase font-bold" style={{ color: accent }}>
                  {statusLabel}
                </span>
              </div>
            </div>

            {/* Seção de Dados */}
            <div className="flex-1">
              <div className="flex justify-between items-start border-b border-[#222] pb-2 mb-4">
                <div>
                  <h2 className="text-4xl font-black text-white uppercase tracking-tighter italic">{v.vilainName}</h2>
                  <p className="font-mono-tactical text-xs text-[#555]">REF_FILE: SDN-B-{v.id.toString().padStart(3, '0')}</p>
                </div>
                <div className="text-right font-mono-tactical text-[10px] text-[#444] leading-tight">
                  <p>DEPT: SEGURANÇA_INTERNA</p>
                  <p>ACESSO: NÍVEL_ALPHA_4</p>
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                {/* Texto maior para habilidades */}
                <div className="space-y-4">
                  <div>
                    <label className="text-[10px] font-mono-tactical font-bold text-[#666] uppercase block mb-1">Habilidades Reconhecidas</label>
                    <p className="text-lg text-[#eee] leading-tight font-medium">{v.powers}</p>
                  </div>
                  <div>
                    <label className="text-[10px] font-mono-tactical font-bold text-[#8b0000] uppercase block mb-1">Pontos de Vulnerabilidade</label>
                    <p className="text-lg text-[#999] italic leading-tight">{v.weaknesses}</p>
                  </div>
                </div>

                {/* Telemetria de Impacto */}
                <div className="space-y-4 bg-black/30 p-4 border border-[#111]">
                  {[
                    { label: "NIVEL DE AMEAÇA A SDN", val: sdn },
                    { label: "PANICO GERADO NA MIDIA", val: media },
                    { label: "PANICO SOCIAL GERADO", val: civis }
                  ].map((stat, i) => (
                    <div key={i}>
                      <div className="flex justify-between text-[10px] font-mono-tactical mb-1 uppercase tracking-wider">
                        <span>{stat.label}</span>
                        <span style={{ color: stat.val > 50 ? '#ff3131' : '#666' }}>{stat.val}%</span>
                      </div>
                      <div className="status-bar-bg">
                        <div 
                          className="status-fill" 
                          style={{ 
                            width: `${stat.val}%`, 
                            backgroundColor: stat.val > 50 ? '#8b0000' : '#444' 
                          }}
                        ></div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        );
      }

      function App() {
        const [vilains, setVilains] = useState([]);
        const [loading, setLoading] = useState(true);

        useEffect(() => {
          fetch(`./vilains.json?v=${new Date().getTime()}`)
            .then(res => res.json())
            .then(data => {
              const dataArray = Array.isArray(data) ? data : [data];
              setVilains(dataArray);
              setLoading(false);
            })
            .catch(() => setLoading(false));
        }, []);

        if (loading) return (
          <div className="h-screen flex items-center justify-center bg-black font-mono-tactical text-[#444]">
            <div className="tracking-[0.5em] animate-pulse">INIT_DATABASE_SYNC...</div>
          </div>
        );

        return (
          <div className="min-h-screen">
            <header className="bg-[#0a0a0a] p-4 border-b border-[#222] sticky top-0 z-50 shadow-2xl">
              <div className="max-w-6xl mx-auto flex justify-between items-center">
                <div className="flex items-center gap-4">
                  <div className="h-8 w-1 bg-red-800"></div>
                  <div>
                    <h1 className="font-mono-tactical text-lg font-bold text-white tracking-widest">SDN // VILAIN_REGISTRY</h1>
                    <p className="text-[9px] text-[#444] font-mono-tactical">PROTOCOLO DE RASTREAMENTO ATIVO</p>
                  </div>
                </div>
                <div className="flex gap-3">
                  <a href="missions.html" className="text-[10px] font-bold border border-[#333] px-4 py-2 hover:bg-white hover:text-black transition-all font-mono-tactical uppercase">TERMINAL DE MISSÕES</a>
                  <a href="SDNAgentNetwork.html" className="text-[10px] font-bold border border-[#333] px-4 py-2 hover:bg-white hover:text-black transition-all font-mono-tactical uppercase">REGISTRO DE AGENTES</a>
                  <a href="funcionarios.html" className="text-[10px] font-bold border border-[#333] px-4 py-2 hover:bg-white hover:text-black transition-all font-mono-tactical uppercase">REGISTRO DE FUNCIONÁRIOS</a>
                  <a href="news.html" className="text-[10px] font-bold border border-[#333] px-4 py-2 hover:bg-white hover:text-black transition-all font-mono-tactical uppercase">REGISTRO DE NOTÍCIAS</a>
                  <a href="feed.html" className="text-[10px] font-bold border border-[#333] px-4 py-2 hover:bg-white hover:text-black transition-all font-mono-tactical uppercase">TERMINAL DE COMUNICAÇÕES</a>
                </div>
              </div>
            </header>

            <main className="max-w-6xl mx-auto p-6 mt-10 flex flex-col items-center">
              {vilains.map(v => <VilainCard key={v.id} v={v} />)}
              <div className="text-[10px] font-mono-tactical font-bold text-[#8b0000] uppercase block mb-1 border-t border-[#222] pt-4 w-full text-center">
                --- FINAL DA LISTAGEM DE ARQUIVOS ---
              </div>
            </main>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>