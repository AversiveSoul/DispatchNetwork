<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SDN AGENT NETWORK - TACTICAL DATABASE</title>
    <script>
    (function() {
        const isAuthenticated = sessionStorage.getItem('sdn_auth');
        if (isAuthenticated !== 'true') {
            window.location.href = "index.html";
        }
    })();
</script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Inter:wght@400;700&family=Outfit:wght@700&family=Share+Tech+Mono&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --teal: #1e5655;
        --neon-green: #46fa5b;
        --bg-dark: #0a0e0d;
        --card-dark: #121c1b;
        --input-dark: #050807;
        --text-main: #e2e8f0;
      }
      body {
        font-family: "Inter", sans-serif;
        background-color: var(--bg-dark);
        color: var(--text-main);
        overflow-x: hidden;
      }

      /* EFEITO DE EST√ÅTICA E SCANLINES */
      .crt-effect::before {
        content: " ";
        display: block;
        position: fixed;
        top: 0; left: 0; bottom: 0; right: 0;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
        z-index: 100;
        background-size: 100% 3px, 3px 100%;
        pointer-events: none;
      }

      .noise {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: url('https://upload.wikimedia.org/wikipedia/commons/7/76/1k_p_Noisy_Texture.png');
        opacity: 0.03;
        z-index: 99;
        pointer-events: none;
        animation: noise-anim 0.2s infinite;
      }

      @keyframes noise-anim {
        0% { transform: translate(0,0) }
        50% { transform: translate(-5%, -5%) }
        100% { transform: translate(5%, 5%) }
      }

      .font-mono-tactical { font-family: "Share+Tech+Mono", monospace; }
      .font-display { font-family: "Outfit", sans-serif; }
      
      .paper-card {
        background: var(--card-dark);
        border-radius: 4px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(70, 250, 91, 0.15);
        position: relative;
        overflow: hidden;
      }

      /* Estilo para campos bloqueados */
      .input-readonly {
        background: var(--input-dark);
        border: 1px solid rgba(70, 250, 91, 0.1);
        border-radius: 4px;
        padding: 4px 8px;
        width: 100%;
        color: #46fa5b;
        cursor: not-allowed;
        outline: none;
      }

      .stat-box {
        border: 1px solid var(--teal);
        border-radius: 4px;
        padding: 5px;
        background: var(--input-dark);
        color: #46fa5b;
      }

      .custom-scrollbar::-webkit-scrollbar { width: 4px; }
      .custom-scrollbar::-webkit-scrollbar-track { background: var(--bg-dark); }
      .custom-scrollbar::-webkit-scrollbar-thumb { background: var(--teal); border-radius: 10px; }
      .eye-button {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-decoration: none;
        cursor: pointer;
        padding: 10px;
        transition: transform 0.3s;
    }

    .eye-button:hover {
        transform: scale(1.1);
    }

    /* O formato da p√°lpebra/fenda */
    .eye-lid {
        width: 40px;
        height: 20px;
        background: #000;
        border: 1px solid rgba(70, 250, 91, 0.2); /* Cor do seu sistema */
        border-radius: 50% 0; /* Formato de fenda org√¢nica */
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        position: relative;
        transition: 0.3s;
        animation: eye-blink 7s infinite ease-in-out;
    }

    /* A pupila/√≠ris */
    .eye-ball {
        width: 12px;
        height: 12px;
        background: #fff;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        animation: eye-look 5s infinite alternate;
    }

    .eye-iris {
        width: 5px;
        height: 5px;
        background: #ff0000; /* Vermelho para parecer perigoso */
        border-radius: 50%;
    }

    /* Texto que s√≥ aparece no Hover */
    .eye-glitch-text {
        font-family: 'Share Tech Mono', monospace;
        font-size: 8px;
        color: #ff0000;
        margin-top: 5px;
        opacity: 0;
        transition: 0.3s;
        text-shadow: 0 0 5px red;
    }

    .eye-button:hover .eye-glitch-text {
        opacity: 1;
        animation: text-flicker 0.1s infinite;
    }

    .eye-button:hover .eye-lid {
        border-color: #ff0000;
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
    }

    /* Anima√ß√£o de Piscar */
    @keyframes eye-blink {
        0%, 90%, 100% { height: 20px; }
        95% { height: 0px; } /* Fecha o olho rapidamente */
    }

    /* Anima√ß√£o de olhar para os lados */
    @keyframes eye-look {
        0% { transform: translate(-5px, 0); }
        50% { transform: translate(5px, 0); }
        100% { transform: translate(0, 0); }
    }

    /* Efeito de glitch no texto */
    @keyframes text-flicker {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 0.8; }
    }
    </style>
  </head>
  <body class="crt-effect">
    <div class="noise"></div>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      function App() {
        const [sheets, setSheets] = useState([]);
        const [activeId, setActiveId] = useState(null);
        const [loading, setLoading] = useState(true);
        const [status, setStatus] = useState("SECURE_LINK");
        // Estado para controlar se mostra o GRID ou o PERFIL
        const [showProfile, setShowProfile] = useState(false);

        // Mapeamento de √°udios por ID
        const agentSounds = {
            "1768491663123": "audioconstan.mp3",
            "1768395719622": "", // Reservado para futuro
            "1768510191893": "audioseve.mp3", // Reservado para futuro
            "1768587731876": "audiocompli.mp3", // Reservado para futuro
            "1768588134350": ""  // Reservado para futuro
        };

        const playSound = (id) => {
            const soundFile = agentSounds[id.toString()];
            if (soundFile) {
                const audio = new Audio(soundFile);
                audio.play().catch(e => console.log("Audio play blocked or file not found"));
            }
        };

        const handleAgentSelection = (id) => {
            setActiveId(id);
            setShowProfile(true);
            playSound(id);
        };

        const loadAgents = async () => {
          setLoading(true);
          const timestamp = new Date().getTime();
          try {
            const response = await fetch(`./agentes.json?v=${timestamp}`);
            const data = await response.json();
            setSheets(data);
            
            // MINI AJUSTE: Verifica se existe um ID na URL ao carregar
            const params = new URLSearchParams(window.location.search);
            const urlId = params.get('id');
            if (urlId) {
              const numericId = Number(urlId);
              setActiveId(numericId);
              setShowProfile(true);
              playSound(numericId);
            }

            setStatus("ENCRYPTED_ACCESS");
          } catch (err) {
            setStatus("LINK_ERROR");
          } finally {
            setLoading(false);
          }
        };

        useEffect(() => { loadAgents(); }, []);

        const activeSheet = sheets.find((s) => s.id === activeId) || {};

        if (loading) {
          return (
            <div className="h-screen flex items-center justify-center bg-black font-mono-tactical text-[#46fa5b]">
              <div className="animate-pulse tracking-widest text-xl">
                &gt; DECRYPTING DATABASE...
              </div>
            </div>
          );
        }

        return (
          <div className="min-h-screen pb-20 relative z-10">
            <header className="bg-[#0d1413] text-white p-5 shadow-2xl border-b border-[#46fa5b]/30">
              <div className="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                <div className="flex gap-4 items-center">
                  <a href="vilains.html" className="bg-red-900/20 border border-red-600/50 text-red-500 px-4 py-2 rounded text-[10px] font-bold hover:bg-red-600 hover:text-white transition-all tracking-widest">
                    Registro de Vil√µes
                  </a>

                  <a href="missions.html" className="bg-blue-900/20 border border-blue-500/50 text-blue-400 px-4 py-2 rounded text-[10px] font-bold hover:bg-blue-500 hover:text-white transition-all tracking-widest">
                    TERMINAL DE MISS√ïES
                  </a>

                  <a href="funcionarios.html" className="bg-blue-900/20 border border-blue-500/50 text-blue-400 px-4 py-2 rounded text-[10px] font-bold hover:bg-blue-500 hover:text-white transition-all tracking-widest">
                    Registro de Funcion√°rios
                  </a>
                  <a href="news.html" className="bg-blue-900/20 border border-blue-500/50 text-blue-400 px-4 py-2 rounded text-[10px] font-bold hover:bg-blue-500 hover:text-white transition-all tracking-widest">
                    Registro de Not√≠cias
                  </a>
                  <a href="feed.html" className="bg-blue-900/20 border border-blue-500/50 text-blue-400 px-4 py-2 rounded text-[10px] font-bold hover:bg-blue-500 hover:text-white transition-all tracking-widest">
                    TERMINAL DE COMUNICA√á√ïES
                  </a>
<a 
  href="TeamS.html" 
  className="relative flex items-center justify-center group w-16 h-16 transition-transform hover:scale-125 active:scale-90"
  title="Acessar Registro Team-S"
>
  {/* Aura de brilho ao fundo (Pulsante) */}
  <div className="absolute inset-0 bg-yellow-500 rounded-full blur-xl opacity-30 group-hover:opacity-70 animate-pulse transition-opacity"></div>
  
  {/* Estrela Principal */}
  <svg 
    viewBox="0 0 24 24" 
    className="w-10 h-10 fill-yellow-400 drop-shadow-[0_0_15px_rgba(250,204,21,1)] relative z-10"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z" />
  </svg>

  {/* Brilho interno (Reflexo) */}
  <svg 
    viewBox="0 0 24 24" 
    className="w-10 h-10 fill-white opacity-40 absolute blur-[2px] z-20 pointer-events-none group-hover:opacity-80 transition-opacity"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z" />
  </svg>
</a>
                  {/* Bot√£o para voltar √† lista quando estiver no perfil */}
                  {showProfile && (
                    <button 
                      onClick={() => setShowProfile(false)}
                      className="bg-[#46fa5b]/10 border border-[#46fa5b]/50 text-[#46fa5b] px-4 py-2 rounded text-[10px] font-bold hover:bg-[#46fa5b] hover:text-black transition-all"
                    >
                      VOLTAR A TELA COM TODOS OS AGENTES
                    </button>
                  )}

                  <select
                    className="bg-black border border-[#46fa5b]/50 rounded px-4 py-2 text-sm outline-none text-[#46fa5b] font-mono-tactical cursor-pointer"
                    value={activeId || ""}
                    onChange={(e) => handleAgentSelection(Number(e.target.value))}
                  >
                    <option value="" disabled>SELECIONE UM AGENTE</option>
                    {sheets.map((s) => (
                      <option key={s.id} value={s.id}>
                        AGENTE: {s.heroName.toUpperCase()}
                      </option>
                    ))}
                  </select>
                </div>
              </div>
            </header>

            <main className="max-w-6xl mx-auto p-4 mt-6">
              
              {!showProfile ? (
                /* TELA DE QUADRADINHOS (GRID) */
                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                  {sheets.map((agent) => (
                    <div 
                      key={agent.id}
                      onClick={() => handleAgentSelection(agent.id)}
                      className="paper-card p-4 cursor-pointer hover:border-[#46fa5b] transition-all group"
                    >
                      <div className="text-[10px] font-mono-tactical text-[#46fa5b]/40 mb-2 uppercase tracking-tighter">ID: {agent.id}</div>
                      <div className="aspect-[3/4] bg-black rounded border border-[#46fa5b]/20 overflow-hidden mb-3">
                        <img
                          src={`./FotosDosAgentes/${agent.portraitFilename}`}
                          className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                          onError={(e) => { e.target.src = "https://via.placeholder.com/150?text=NO_IMAGE"; }}
                        />
                      </div>
                      <div className="text-center font-display font-bold text-[#46fa5b] uppercase tracking-widest text-sm">
                        {agent.heroName}
                      </div>
                    </div>
                  ))}
                </div>
              ) : (
                /* TELA DE PERFIL (C√ìDIGO ORIGINAL) */
                <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                  {/* COLUNA ESQUERDA: PERFIL E ATRIBUTOS */}
                  <div className="lg:col-span-5 space-y-6">
                    <section className="paper-card p-6 border-l-4 border-l-[#46fa5b]">
                      <div className="flex gap-6">
                        <div className="w-2/5">
                          <div className="aspect-[3/4] bg-black rounded border border-[#46fa5b]/30 overflow-hidden shadow-[0_0_15px_rgba(0,0,0,0.5)]">
                            <img
                              src={`./FotosDosAgentes/${activeSheet.portraitFilename}`}
                              className="w-full h-full object-cover transition-all duration-500"
                              onError={(e) => { e.target.src = "https://via.placeholder.com/150?text=NO_IMAGE"; }}
                            />
                          </div>
                        </div>
                        <div className="flex-1 space-y-4">
                          <div>
                            <label className="text-[10px] font-black text-[#46fa5b] opacity-40 uppercase tracking-[0.2em] block mb-1">Codinome</label>
                            <div className="text-2xl font-display font-black text-[#46fa5b] tracking-tight">{activeSheet.heroName}</div>
                          </div>
                          <div>
                            <label className="text-[10px] font-black text-[#46fa5b] opacity-40 uppercase tracking-[0.2em] block mb-1">Identidade Civil</label>
                            <div className="text-sm font-mono-tactical text-slate-300 border-b border-white/10 pb-1">{activeSheet.ageProf || "N√ÉO CONSTA"}</div>
                          </div>
                        </div>
                      </div>
                    </section>

                    <section className="paper-card p-5 font-mono-tactical bg-gradient-to-b from-[#121c1b] to-black">
                      <h2 className="text-[#46fa5b] font-bold text-xs uppercase mb-5 tracking-widest flex items-center gap-2">
                        <span className="w-2 h-2 bg-[#46fa5b] animate-pulse"></span> N√çVEIS DE REPUTA√á√ÉO
                      </h2>
                      <div className="space-y-4">
                        {[
                          { label: "Confian√ßa da SDN", val: activeSheet.repSdn, color: "accent-[#46fa5b]" },
                          { label: "Status na M√≠dia", val: activeSheet.repMedia, color: "accent-blue-500" },
                          { label: "Apoio Civil", val: activeSheet.repCivis, color: "accent-orange-500" }
                        ].map((rep, idx) => (
                          <div key={idx}>
                            <label className="text-[10px] text-slate-400 uppercase flex justify-between mb-1">
                              {rep.label} <span className="text-[#46fa5b]">{rep.val}%</span>
                            </label>
                            <input type="range" className={`w-full ${rep.color} cursor-not-allowed opacity-70`} value={rep.val} disabled />
                          </div>
                        ))}
                      </div>
                    </section>

                    <section className="paper-card p-5">
                      <h2 className="text-[#46fa5b] font-bold text-xs uppercase mb-4 tracking-widest font-mono-tactical border-b border-[#46fa5b]/10 pb-2">
                        ATRIBUTOS T√ÅTICOS
                      </h2>
                      <div className="grid grid-cols-5 gap-3">
                        {[
                          { n: "Combate", l: "Combate" },
                          { n: "Inteligencia", l: "Inteligencia" },
                          { n: "Carisma", l: "Carisma" },
                          { n: "Mobilidade", l: "Mobilidade" },
                          { n: "Vigor", l: "Vigor" },
                        ].map((attr) => (
                          <div key={attr.n} className="text-center">
                            <div className="stat-box text-lg font-black font-mono-tactical">
                              {activeSheet[`attr${attr.n}`] || 0}
                            </div>
                            <span className="text-[8px] font-black uppercase text-slate-500 mt-2 block font-mono-tactical">
                              {attr.l}
                            </span>
                          </div>
                        ))}
                      </div>
                    </section>
                  </div>

                  <div className="lg:col-span-7 flex flex-col">
                    <section className="paper-card p-6 flex-1 flex flex-col border-t-4 border-t-white/10">
                      <h2 className="font-bold text-[#46fa5b] uppercase text-xs tracking-widest mb-4 flex items-center gap-2 font-mono-tactical">
                        üìÅ Dados Do Agente
                      </h2>
                      <textarea
                        className="w-full flex-1 bg-black/40 border border-white/5 outline-none font-mono-tactical text-xs leading-relaxed text-[#46fa5b]/70 resize-none custom-scrollbar p-4 rounded cursor-not-allowed"
                        value={activeSheet.activeOps || "NENHUM LOG DISPON√çVEL NO MOMENTO."}
                        readOnly
                      />

                      <div className="grid grid-cols-2 gap-6 mt-6 pt-6 border-t border-white/5">
                        <div>
                          <h3 className="text-[10px] font-black text-[#46fa5b] uppercase mb-2 font-mono-tactical tracking-widest">
                            Capacidades Especiais
                          </h3>
                          <textarea
                            className="input-readonly text-xs h-32 resize-none leading-relaxed opacity-80"
                            value={activeSheet.powers || ""}
                            readOnly
                          />
                        </div>
                        <div>
                          <h3 className="text-[10px] font-black text-red-500 uppercase mb-2 font-mono-tactical tracking-widest">
                            Pontos Fracos
                          </h3>
                          <textarea
                            className="input-readonly !text-red-400 !border-red-900/30 text-xs h-32 resize-none leading-relaxed opacity-80"
                            value={activeSheet.weaknesses || ""}
                            readOnly
                          />
                        </div>
                      </div>
                      
                      <div className="mt-8 flex justify-between items-center opacity-30">
                        <span className="text-[9px] font-mono-tactical text-slate-500">
                          FILE_ID: {activeSheet.id} // SECURE_ACCESS_GRANTED
                        </span>
                        <span className="text-[9px] font-mono-tactical text-slate-500 uppercase">
                          Copyright ¬© SDN Agency 2026
                        </span>
                      </div>
                    </section>
                  </div>
                </div>
              )}
            </main>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>